<!DOCTYPE html>
<html lang="en">
<head>
        <title>Linux on a Macbook part II: the drill</title>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="./theme/images/fire.png">
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="./feed.rss" type="application/rss+xml" rel="alternate" title="machine burning RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <div class="social">
				    <a href="./feed.rss" rel="alternate">
					    <span></span>
				    </a>

				    <a href="http://last.fm/user/gbrunoro">
					    <span></span>
				    </a>
				    <a href="http://github.com/brunoro">
					    <span></span>
				    </a>
                </div>
                <h1><a href="."><span id="title0">machine burning</span><span id="title1">machine burning</span><span id="title2">machine burning</span> </a></h1>
                </ul></nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">    
<article>
        <header> <h1 class="entry-title"><a href=""
        rel="bookmark" title="Permalink to Linux on a Macbook part II: the drill">Linux on a Macbook part II: the drill</a></h1>  </header>
<div class="post-info">
        <abbr class="published" title="2012-07-06T00:00:00+02:00">
                2012-07-06
        </abbr>

<p>in <a href="./category/linux-macbook.html">linux-macbook</a>. </p>
<p>tags: <a href="./tag/linux.html">linux</a><a href="./tag/osx.html">osx</a><a href="./tag/macbook.html">macbook</a></p></div><!-- /.post-info -->        <div class="entry-content">
        <p>The Arch Linux installation process wasn't much different on a Macbook than it would be on another laptop.
Installing the bootloader comes as the main issue, but even though it was quickly solved. It's always helpful
to have another device connected to the internet so you can read the <a href="https://wiki.archlinux.org/index.php/MacBook">Arch</a> 
and <a href="http://en.gentoo-wiki.com/wiki/Apple_Macbook">Gentoo</a> Macbook wiki pages during the process.
Also, you'll need wired internet access on some steps of the installation.</p>
<p>Start by downloading the core iso at archlinux.org and burning it on a CD. 
I have not tried to boot from a USB flash drive. Boot it on your Macbook by holding the C key on startup.
When you get a working shell, it's time to partition the hard drive using a GPT table. You won't be able
to this using the bundled cfdisk application, so connect to the internet and install cgdisk from the gptfdisk package:</p>
<div class="highlight"><pre># connect to the internet
$ dhcpcd
# install the package
$ pacman -Sy gptfdisk
# partition your main disk
$ cgdisk /dev/sda
</pre></div>


<p>You should create a separate /boot partition. For instance, my disk looks like this:</p>
<div class="highlight"><pre>Name    Type    Size 
----    ----    ----
EFI     vfat    200Mb
boot    ext2    100Mb
swap    swap    2Gb
root    ext4    60Gb
home    ext4    170Gb
</pre></div>


<p>Now start the installation running /arch/setup. Select your timezone and your system clock looks fine with UTC time.
On the prepare hard disk step just create the filesystems on the partition table you created before.
Keep the setup normally until the bootloader step - <strong>don't install a bootloader</strong>.</p>
<p>Quit the arch setup menu and return to the shell. Install UEFI version of GRUB2 following the 
<a href="https://wiki.archlinux.org/index.php/Grub2">guide on the Arch wiki</a>. Run to generate the config files needed to boot:</p>
<div class="highlight"><pre><span class="nv">$ </span>grub-mkconfig -o /boot/grub/grub.cfg
</pre></div>


<p>Now we just need to tell the built-in bootloader that our GRUB2 is bootable. 
To do this go fetch your Mac OS X install disk and boot from it. Select your
language and then open Terminal.app, it should be on the top menu under <em>Utils/Terminal.app</em>.
You're going to <em>bless</em> your boot partition (the filenames depend on the previous step):</p>
<div class="highlight"><pre><span class="nv">$ </span>bless --mount<span class="o">=</span>/Volumes/EFI  --file<span class="o">=</span>/Volumes/EFI/efi/arch/grub-x86_64.efi --setBoot
</pre></div>


<p>Now your Arch Linux should boot from GRUB2 after a couple of seconds stuck on the blue-ish EFI screen.
The next challeng is the post-install party, get your energy drinks.</p>
        </div><!-- /.entry-content -->

</article>
</section>
        <section id="extras" class="body">
       </section><!-- /#extras -->

        <footer id="about" class="body">
            <p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.</p>
            <p>Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-32411032-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>