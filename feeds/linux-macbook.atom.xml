<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>machine burning</title><link href="http://hitnail.net/" rel="alternate"></link><link href="http://hitnail.net/feeds/linux-macbook.atom.xml" rel="self"></link><id>http://hitnail.net/</id><updated>2012-11-07T00:00:00+01:00</updated><entry><title>NVIDIA blob, Macbook 7,1 and EFI boot</title><link href="http://hitnail.net/nvidia-blob-macbook-71-and-efi-boot.html" rel="alternate"></link><updated>2012-11-07T00:00:00+01:00</updated><author><name>gus</name></author><id>tag:hitnail.net,2012-11-07:nvidia-blob-macbook-71-and-efi-boot.html</id><summary type="html">&lt;p&gt;The user experience for a developer under Linux is way more flexible than under Mac OS X,
specially talking about package management, which is light-years more evolved on the open
source world. But, on the other hand, some hassle can be experienced from bad hardware 
support and buggy drivers. That's definetely the case with the NVIDIA 320m card on the 
Macbook 7,1 using a EFI boot. The lack of support of the NVIDIA drivers is already known
from many recent facts such as &lt;a href="ihttp://www.youtube.com/watch?v=MShbP3OpASA"&gt;that Linus Torvalds interview&lt;/a&gt; 
and the &lt;a href="http://www.phoronix.com/scan.php?page=news_item&amp;amp;px=MTEyNTE"&gt;10 million GPU order&lt;/a&gt; they've lost to AMD.&lt;/p&gt;
&lt;p&gt;&lt;img alt="&amp;quot;A picture is worth a thousand words&amp;quot;" src="img/fuck-you-nvidia.jpg" title="A picture is worth a thousand words" /&gt;&lt;/p&gt;
&lt;p&gt;Apple decided to ship the Macbooks using a different boot technology than the old BIOS that
we see on most hardware; Mac OS X boots using a wonky EFI (Extended Firmware Interface) implementation.
That said, it does not use the old MBR partition tables, but the more flexible GUID Partition Tables.
Not to care about the true intentions of switching to EFI boot and the bizarre hybrid MBR setup Apple
proposes for booting Windows and other legacy software (sic), the main issue resides on the fact that
the proprietary NVIDIA driver reads&lt;/p&gt;
&lt;p&gt;Some precious information regarding booting from UEFI devices may be found on the &lt;a href="https://help.ubuntu.com/community/UEFIBooting"&gt;Ubuntu documentation&lt;/a&gt;. There are quite a few forum threads with no conclusive answers about this issue, such as
&lt;a href="http://www.nvnews.net/vbulletin/showthread.php?t=180737&amp;amp;highlight=linux+EFI"&gt;this one&lt;/a&gt;, &lt;a href="http://forums.gentoo.org/viewtopic-p-7071700.html?sid=57d7b854338e2647b9ba910f7674263a"&gt;this one&lt;/a&gt; and &lt;a href="https://bbs.archlinux.org/viewtopic.php?id=142664"&gt;this one&lt;/a&gt; only to mention a few. A NVIDIA developer already spoke about
the problem at &lt;a href="http://www.nvnews.net/vbulletin/showthread.php?t=174006&amp;amp;page=2&amp;amp;highlight=linux+EFI"&gt;nvnews forum thread&lt;/a&gt; saying that they have plans on addressing it.&lt;/p&gt;
&lt;p&gt;The &lt;strong&gt;nouveau&lt;/strong&gt; reverse engineered driver does an excellent job for daily use of the machine. The lack
of support of the official driver closes the door to massive parallel CUDA programming, and also causes 
bad perfomance when up to OpenGL development and playing games, as hardware acceleration
is very much needed to guarantee a smooth ride on those applications.&lt;/p&gt;
&lt;p&gt;It's quite a shame that NVIDIA still haven't fixed this issue on a 2009 machine, given that
the UEFI booting is to become the standard for newer hardware. Also, gaming on Linux is getting
a lot of attention with &lt;a href="http://www.phoronix.com/scan.php?page=article&amp;amp;item=valve_linux_dampfnudeln&amp;amp;num=1"&gt;Valve's initiative&lt;/a&gt;
and the great &lt;a href="http://humblebundle.com"&gt;Humble Indie Bundle&lt;/a&gt; with great games for the platform.&lt;/p&gt;
&lt;p&gt;This whole experience just showed me that getting Apple hardware, despite its beauty and hype factor,
may not be a good option if you have plans on using it as a serious Linux box.&lt;/p&gt;</summary><category term="linux"></category><category term="osx"></category><category term="macbook"></category><category term="efi"></category><category term="nvidia"></category></entry><entry><title>Linux on a Macbook part II: the drill</title><link href="http://hitnail.net/linux-on-a-macbook-part-ii-the-drill.html" rel="alternate"></link><updated>2012-07-06T00:00:00+02:00</updated><author><name>gus</name></author><id>tag:hitnail.net,2012-07-06:linux-on-a-macbook-part-ii-the-drill.html</id><summary type="html">&lt;p&gt;The Arch Linux installation process wasn't much different on a Macbook than it would be on another laptop.
Installing the bootloader comes as the main issue, but even though it was quickly solved. It's always helpful
to have another device connected to the internet so you can read the &lt;a href="https://wiki.archlinux.org/index.php/MacBook"&gt;Arch&lt;/a&gt; 
and &lt;a href="http://en.gentoo-wiki.com/wiki/Apple_Macbook"&gt;Gentoo&lt;/a&gt; Macbook wiki pages during the process.
Also, you'll need wired internet access on some steps of the installation.&lt;/p&gt;
&lt;p&gt;Start by downloading the core iso at archlinux.org and burning it on a CD. 
I have not tried to boot from a USB flash drive. Boot it on your Macbook by holding the C key on startup.
When you get a working shell, it's time to partition the hard drive using a GPT table. You won't be able
to this using the bundled cfdisk application, so connect to the internet and install cgdisk from the gptfdisk package:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;# connect to the internet
$ dhcpcd
# install the package
$ pacman -Sy gptfdisk
# partition your main disk
$ cgdisk /dev/sda
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You should create a separate /boot partition. For instance, my disk looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Name    Type    Size 
----    ----    ----
EFI     vfat    200Mb
boot    ext2    100Mb
swap    swap    2Gb
root    ext4    60Gb
home    ext4    170Gb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now start the installation running /arch/setup. Select your timezone and your system clock looks fine with UTC time.
On the prepare hard disk step just create the filesystems on the partition table you created before.
Keep the setup normally until the bootloader step - &lt;strong&gt;don't install a bootloader&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Quit the arch setup menu and return to the shell. Install UEFI version of GRUB2 following the 
&lt;a href="https://wiki.archlinux.org/index.php/Grub2"&gt;guide on the Arch wiki&lt;/a&gt;. Run to generate the config files needed to boot:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;grub-mkconfig -o /boot/grub/grub.cfg
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now we just need to tell the built-in bootloader that our GRUB2 is bootable. 
To do this go fetch your Mac OS X install disk and boot from it. Select your
language and then open Terminal.app, it should be on the top menu under &lt;em&gt;Utils/Terminal.app&lt;/em&gt;.
You're going to &lt;em&gt;bless&lt;/em&gt; your boot partition (the filenames depend on the previous step):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;bless --mount&lt;span class="o"&gt;=&lt;/span&gt;/Volumes/EFI  --file&lt;span class="o"&gt;=&lt;/span&gt;/Volumes/EFI/efi/arch/grub-x86_64.efi --setBoot
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now your Arch Linux should boot from GRUB2 after a couple of seconds stuck on the blue-ish EFI screen.
The next challeng is the post-install party, get your energy drinks.&lt;/p&gt;</summary><category term="linux"></category><category term="osx"></category><category term="macbook"></category></entry><entry><title>Linux on a Macbook part I: the fair jugdement</title><link href="http://hitnail.net/linux-on-a-macbook-part-i-the-fair-jugdement.html" rel="alternate"></link><updated>2012-06-04T00:00:00+02:00</updated><author><name>gus</name></author><id>tag:hitnail.net,2012-06-04:linux-on-a-macbook-part-i-the-fair-jugdement.html</id><summary type="html">&lt;p&gt;It wasn't hard to embrace Mac OS X when I bought my Macbook, back in 2010.
It's a very good looking and practical UNIX flavor running on sexy designed hardware.
And it is pretty usable out-of-the box, unless you like tweaking your system to the last 
variable and compiler flag, like many of us Linux people like to.&lt;/p&gt;
&lt;p&gt;Everything seemed fine although kind of awkward on my Mac OS X setup. I even got used to the
pain of not having a proper package manager (&lt;a href="https://github.com/mxcl/homebrew"&gt;Homebrew&lt;/a&gt;, 
you're awesome, but still no &lt;a href="https://wiki.archlinux.org/index.php/Pacman"&gt;pacman&lt;/a&gt; + 
&lt;a href="https://wiki.archlinux.org/index.php/Arch_Build_System"&gt;ABS&lt;/a&gt;.
I had &lt;a href="https://github.com/fikovnik/ShiftIt"&gt;ShiftIt&lt;/a&gt; and Spaces helping me emulate an efficient
window manager and got used to the Mac way of not letting you have things the way you want. 
I could enjoy having all the fancy transitions/eye-candy and yet be confortable with my beloved 
geeky environiment.&lt;/p&gt;
&lt;p&gt;All of a sudden things started to become weird and slow, painfully slow. I don't know what went
wrong, but some fellow Mac users told me it was time for reformatting my laptop. That's what I'm
doing. After reasoning over the pros and cons, I'm finally getting Linux installed on my Macbook.&lt;/p&gt;
&lt;p&gt;So, here are my pros and cons list about Mac OS X:&lt;/p&gt;
&lt;h2&gt;Pros&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Have a working system since first logging in&lt;/li&gt;
&lt;li&gt;Full hardware compatibility&lt;/li&gt;
&lt;li&gt;Music software such as Logic, Ableton Live and VST instruments&lt;/li&gt;
&lt;li&gt;The Adobe suite (it turns out it can be useful for a programmer)&lt;/li&gt;
&lt;li&gt;Having some problems sorted out for you like backups, network config, etc.&lt;/li&gt;
&lt;li&gt;Working iPod syncronization&lt;/li&gt;
&lt;li&gt;No xrandr magic to be done when using an external display.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Cons&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;No package management&lt;/li&gt;
&lt;li&gt;Not customizable&lt;/li&gt;
&lt;li&gt;No real choice apart &lt;em&gt;The Apple Way ©&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Can get painfully slow&lt;/li&gt;
&lt;li&gt;Harsh disk usage due to static linking&lt;/li&gt;
&lt;li&gt;Does not present a good service management interface&lt;/li&gt;
&lt;li&gt;Struggle to keep files up-to-date with my Linux stations  (not quite OS X related, but very relevant for me)&lt;/li&gt;
&lt;li&gt;A filesystem that can only be fully rw mounted from OS X&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It seems like a clear win for Linux.&lt;/p&gt;</summary><category term="linux"></category><category term="osx"></category><category term="macbook"></category></entry></feed>