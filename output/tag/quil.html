<!DOCTYPE html>
<html lang="en">
<head>
        <title>machine burning - quil</title>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="../theme/images/fire.png">
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="../feed.rss" type="application/rss+xml" rel="alternate" title="machine burning RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <div class="social">
				    <a href="../feed.rss" rel="alternate">
					    <span></span>
				    </a>

				    <a href="https://www.linkedin.com/in/gbrunoro">
					    <span></span>
				    </a>
				    <a href="http://github.com/brunoro">
					    <span></span>
				    </a>
				    <a href="http://last.fm/user/gbrunoro">
					    <span></span>
				    </a>
				    <a href="http://soundcloud.com/beise">
					    <span></span>
				    </a>
                </div>
                <h1><a href=".."><span id="title0">machine burning</span><span id="title1">machine burning</span><span id="title2">machine burning</span> </a></h1>
                </ul></nav>
        </header><!-- /#banner -->
        
        

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../the-kepler-bouwkamp-constant.html">The Kepler-Bouwkamp Constant</a></h1> 
<div class="post-info">
        <abbr class="published" title="2013-10-14T00:00:00+02:00">
                2013-10-14
        </abbr>

<p>in <a href="../category/misc.html">misc</a>. </p>
<p>tags: <a href="../tag/clojure.html">clojure</a><a href="../tag/quil.html">quil</a><a href="../tag/math.html">math</a></p></div><!-- /.post-info --><p>Follow this construction: draw a circle and inscribe a triangle inside it; inscribe a circle inside
this triangle and repeat the process, now inscribing a square. Continue this steps using pentagons,
hexagons, heptagons, etc.
The ratio between the radius of the outer circle and the inner limit circle is called the
<a href="http://en.wikipedia.org/wiki/Kepler%E2%80%93Bouwkamp_constant">Kepler-Bouwkamp constant</a>.</p>
<p>As described by Adrian R. Kitson's paper <a href="http://arxiv.org/abs/math/0608186">The prime analog of the Kepler-Bouwkamp constant</a>,
that same steps can be done using other sequences, including that of prime numbers. 
On that article, Adrian derives the value of the constant, but doesn't include any image of the 
the construction that'd result from the process. </p>
<p><img alt="The prime Kepler-Bouwkamp constant" src="img/prime-kepler-bouwkamp.png" /></p>
<p>I really like those kind of constructions, so I implemented it using <a href="https://github.com/quil/quil">Quil</a>
to get an idea how it looks. Here comes the code:</p>
<div class="gist">
    <script src='https://gist.github.com/6984849.js'></script>
    <noscript>
        <div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">kepler-bouwkamp.core</span>
  <span class="p">(</span><span class="ss">:use</span> <span class="nv">quil.core</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">tau</span> <span class="mf">6.283185307179586</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">circle</span> <span class="p">[</span><span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">r</span><span class="p">]</span>
  <span class="s">&quot;Draws a circle centered at (cx, cy) with radius r.&quot;</span>
  <span class="p">(</span><span class="k">let </span>
    <span class="p">[</span><span class="nv">d</span> <span class="p">(</span><span class="nb">* </span><span class="nv">r</span> <span class="mi">2</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">ellipse</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">d</span> <span class="nv">d</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">pivot</span> <span class="p">[</span><span class="nv">px</span> <span class="nv">py</span> <span class="nv">ox</span> <span class="nv">oy</span> <span class="nv">angle</span><span class="p">]</span>
  <span class="s">&quot;Pivots (px, py) by angle using (ox, oy) as an axis.&quot;</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">angle</span><span class="p">)</span>
    <span class="p">[</span><span class="nv">px</span> <span class="nv">py</span><span class="p">]</span>
    <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">nx</span>  <span class="p">(</span><span class="nb">- </span><span class="nv">px</span> <span class="nv">ox</span><span class="p">)</span>
          <span class="nv">ny</span>  <span class="p">(</span><span class="nb">- </span><span class="nv">py</span> <span class="nv">oy</span><span class="p">)</span>
          <span class="nv">sin</span> <span class="p">(</span><span class="nf">Math/sin</span> <span class="nv">angle</span><span class="p">)</span>
          <span class="nv">cos</span> <span class="p">(</span><span class="nf">Math/cos</span> <span class="nv">angle</span><span class="p">)]</span>
      <span class="p">[(</span><span class="nb">+ </span><span class="nv">ox</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">* </span><span class="nv">nx</span> <span class="nv">cos</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">ny</span> <span class="nv">sin</span><span class="p">)))</span>
       <span class="p">(</span><span class="nb">+ </span><span class="nv">oy</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="nv">nx</span> <span class="nv">sin</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">ny</span> <span class="nv">cos</span><span class="p">)))])))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">polygon</span> <span class="p">[</span><span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">radius</span> <span class="nv">sides</span><span class="p">]</span>
  <span class="s">&quot;Draws a polygon centered at (cx, cy) with the </span>
<span class="s">   given radius and number of sides.&quot;</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">angle</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">tau</span> <span class="nv">sides</span><span class="p">)</span>
        <span class="nv">ox</span>    <span class="p">(</span><span class="nb">+ </span><span class="nv">cx</span> <span class="nv">radius</span><span class="p">)]</span>
    <span class="p">(</span><span class="nb">doseq </span>
      <span class="p">[</span><span class="nv">i</span> <span class="p">(</span><span class="nb">range </span><span class="nv">sides</span><span class="p">)]</span>
      <span class="p">(</span><span class="nf">let</span>
        <span class="p">[[</span><span class="nv">sx</span> <span class="nv">sy</span><span class="p">]</span> <span class="p">(</span><span class="nf">pivot</span> <span class="nv">ox</span> <span class="nv">cy</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="p">(</span><span class="nb">* </span><span class="nv">i</span> <span class="nv">angle</span><span class="p">))</span>
         <span class="p">[</span><span class="nv">ex</span> <span class="nv">ey</span><span class="p">]</span> <span class="p">(</span><span class="nf">pivot</span> <span class="nv">ox</span> <span class="nv">cy</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="p">(</span><span class="nb">* </span><span class="p">(</span><span class="nb">inc </span><span class="nv">i</span><span class="p">)</span> <span class="nv">angle</span><span class="p">)]</span>
        <span class="p">(</span><span class="nf">line</span> <span class="nv">sx</span> <span class="nv">sy</span> <span class="nv">ex</span> <span class="nv">ey</span><span class="p">)))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">ins-radius</span> <span class="p">[</span><span class="nv">radius</span> <span class="nv">sides</span><span class="p">]</span> 
  <span class="s">&quot;Returns the inscribed radius of a polygon with</span>
<span class="s">   a given radius and number of sides.&quot;</span>
  <span class="p">(</span><span class="nb">* </span><span class="nv">radius</span> <span class="p">(</span><span class="nf">Math/cos</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">/ </span><span class="nv">tau</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">sides</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">circle-inscribe-polygon</span> <span class="p">[</span><span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">rad</span> <span class="nv">sides</span><span class="p">]</span>
  <span class="s">&quot;Draws a circle and the inscribed polygon with the given number</span>
<span class="s">   of sides, centered at (cx, cy) and with radius rad.&quot;</span>
  <span class="p">(</span><span class="k">let </span>
    <span class="p">[</span><span class="nv">ins</span> <span class="p">(</span><span class="nf">ins-radius</span> <span class="nv">rad</span> <span class="nv">sides</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">circle</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">rad</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">polygon</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">rad</span> <span class="nv">sides</span><span class="p">)</span>
    <span class="nv">ins</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">setup</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nf">smooth</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">frame-rate</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">background</span> <span class="mi">255</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">draw</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nf">stroke</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">stroke-weight</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">cx</span>  <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">width</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> 
        <span class="nv">cy</span>  <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">height</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>
        <span class="nv">rad</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nb">min </span><span class="nv">cx</span> <span class="nv">cy</span><span class="p">)</span> <span class="mi">10</span><span class="p">)]</span> <span class="c1">; add some padding to the radius</span>
    <span class="p">(</span><span class="nb">reduce </span><span class="o">#</span><span class="p">(</span><span class="nf">circle-inscribe-polygon</span> <span class="nv">cx</span> <span class="nv">cy</span> <span class="nv">%1</span> <span class="nv">%2</span><span class="p">)</span> <span class="nv">rad</span> 
      <span class="p">[</span><span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">11</span> <span class="mi">13</span> <span class="mi">17</span> <span class="mi">19</span> <span class="mi">23</span> <span class="mi">27</span> <span class="mi">31</span><span class="p">])))</span> <span class="c1">; the sequence will converge before that</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">-main</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nf">sketch</span> 
    <span class="ss">:title</span> <span class="s">&quot;Kepler-Bouwkamp constant&quot;</span>
    <span class="ss">:setup</span> <span class="nv">setup</span>
    <span class="ss">:draw</span> <span class="nv">draw</span>
    <span class="ss">:size</span> <span class="p">[</span><span class="mi">600</span> <span class="mi">600</span><span class="p">]))</span>
</pre></div>

    </noscript>
</div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
       </section><!-- /#extras -->

        <footer id="about" class="body">
            <p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.</p>
            <p>Theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-32411032-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>