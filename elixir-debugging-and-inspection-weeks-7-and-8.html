<!DOCTYPE html>
<html lang="en">
<head>
        <title>Elixir: Debugging and Inspection - weeks 7 and 8</title>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="./theme/images/fire.png">
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
        <link href="./feed.rss" type="application/rss+xml" rel="alternate" title="machine burning RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <div class="social">
				    <a href="./feed.rss" rel="alternate">
					    <span></span>
				    </a>

				    <a href="http://github.com/brunoro">
					    <span></span>
				    </a>
				    <a href="http://last.fm/user/gbrunoro">
					    <span></span>
				    </a>
				    <a href="http://androidsdreaminpixels.tumblr.com">
					    <span></span>
				    </a>
				    <a href="http://soundcloud.com/beise">
					    <span></span>
				    </a>
                </div>
                <h1><a href="."><span id="title0">machine burning</span><span id="title1">machine burning</span><span id="title2">machine burning</span> </a></h1>
                </ul></nav>
        </header><!-- /#banner -->
        
<section id="content" class="body">    
<article>
        <header> <h1 class="entry-title"><a href=""
        rel="bookmark" title="Permalink to Elixir: Debugging and Inspection - weeks 7 and 8">Elixir: Debugging and Inspection - weeks 7 and 8</a></h1>  </header>
<div class="post-info">
        <abbr class="published" title="2013-08-12T00:00:00+02:00">
                2013-08-12
        </abbr>

<p>in <a href="./category/gsoc2013.html">gsoc2013</a>. </p>
<p>tags: <a href="./tag/gsoc2013.html">gsoc2013</a><a href="./tag/elixir.html">elixir</a></p></div><!-- /.post-info -->        <div class="entry-content">
        <p>The second half of the GSoC program started with the Elixir debugger beginning to show some stability.
Some of the challenges foreseen when taking the decision on the metaprogramming-based design have been solved,
but other tricky control-flow structures involving exception handling and multiprocessing now have to be tackled.</p>
<h3>Rescue catching or keep trying</h3>
<p>Exceptions require a lot of caution on their handling: the debugger should isolate its own exceptions from
those raised withing the interpreted program.
With that goal in mind some refactoring work was needed to tag and enclose the <code>:elixir.eval_quoted</code> calls
on a rescue-all block.</p>
<p>The expression building trick used to emulate variable initialization used for case expressions
showed itself an amazing tool for implementing many constructs of Elixir on the debugger runtime.
However, this pattern couldn't be used for matching variables on rescue/catch clauses, as, differently
from case clauses, the names defined inside exception-handling blocks don't persist on the rest of the
program.</p>
<p>An example illustrates better this behaviour:</p>
<div class="highlight"><pre>def foo do
  try do
    raise &quot;message&quot;
  rescue
    x in [RuntimeError] -&gt;
      x.message # =&gt; &quot;message&quot;
  end
  x  # =&gt; ERROR: x not alive here
end

def bar do
  case &quot;message&quot; do
    x -&gt; x # =&gt; &quot;message&quot;
  end
  x  # =&gt; x is alive here, equals to &quot;message&quot;)
end
</pre></div>


<p>To avoid implementing the semantics for rescue/catch, we resorted to the before dreaded nested eval calls.
That strategy worked pretty well with some rough edges yet to be rounded, mainly coming from this <strong>evalception</strong>.</p>
<h3>Private mode</h3>
<p>I have foreseen anonymous functions somehow as bump on the road while nested eval calls were ruled out of the options.
After the change on the structure of Evaluators/Coordinators/Runners, that approach became again the perfect fit
for implementing <code>fn -&gt; (...) end</code> constructs.</p>
<p>The next weeks will host a lot of effort on anonymous functions and polishing try/rescue/catch expressions,
and hopefully the first version of the debugger shell.</p>
        </div><!-- /.entry-content -->

</article>
</section>
        <section id="extras" class="body">
       </section><!-- /#extras -->

        <footer id="about" class="body">
            <p>Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>; theme based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a></p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-32411032-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>